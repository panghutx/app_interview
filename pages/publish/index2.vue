<template>
	<view class="container">
		<uni-card :is-shadow="false" is-full>
			<text class="uni-h6">åˆ†äº«é¢ç»ï¼ŒåŠŸå¾·+1ğŸ¥°</text>
		</uni-card>
		
			<view class="example">
				<!-- åŸºç¡€ç”¨æ³•ï¼Œä¸åŒ…å«æ ¡éªŒè§„åˆ™ -->
				<uni-forms ref="baseForm" :model="form" labelWidth="80px">
					<uni-forms-item label="æ ‡é¢˜" required>
						<uni-easyinput v-model="form.value.title" placeholder="è¯·è¾“å…¥é¢ç»æ ‡é¢˜" />
					</uni-forms-item>
					<uni-forms-item label="å†…å®¹" required>
						<uni-easyinput type="textarea" v-model="form.value.content" placeholder="è¯·è¾“å…¥é¢ç»å†…å®¹" />
					</uni-forms-item>
					<uni-forms-item label="ç±»åˆ«" required>
						<uni-data-select v-model="form.value.skills" :localdata="skillsRange.value" >
						</uni-data-select>
					</uni-forms-item>
					<uni-forms-item label="æ ‡ç­¾" required>
						<uni-easyinput v-model="form.value.tags" placeholder="è¯·è¾“å…¥æ ‡ç­¾ï¼Œæ”¯æŒå¤šæ ‡ç­¾ï¼Œä»¥,åˆ†éš”" />
					</uni-forms-item>
				</uni-forms>
			</view>
			
			<!-- å‘å¸ƒæŒ‰é’® -->
			<view class="submit-button" @click="handleSubmit">
			  å‘å¸ƒé¢ç»
			</view>
	</view>
</template>

<script setup>
	import { ref } from 'vue'
				// åŸºç¡€è¡¨å•æ•°æ®
				const form= ref({
					title: '',
					content: '',
					tags:'',
					skills: 0
				})

				const skillsRange =ref([{
						value: 0,
						text: "å…¨éƒ¨"
					},
					{
						value: 1,
						text: "åç«¯"
					},
					{
						value: 2,
						text: "å‰ç«¯"
					},
					{
						value: 3,
						text: "æµ‹è¯•"
					},
					{
						value: 4,
						text: "ç®—æ³•"
					},
					{
						value: 5,
						text: "å¤§æ•°æ®"
					},
					{
						value: 6,
						text: "è¿ç»´"
					}
				])

    const handleSubmit = () => {
      if (!form.value.title || !form.value.content || !form.value.tags) {
        uni.showToast({
          title: 'è¯·å®Œæ•´å¡«å†™ä¿¡æ¯',
          icon: 'none'
        })
        return
      }
    
      const selectedTag = tags.value[selectedTagIndex.value]
      console.log("å‘å¸ƒå†…å®¹ï¼š", form.value, "æ ‡ç­¾ï¼š", selectedTag.label)
      
      // è¿™é‡Œå¯ä»¥è°ƒç”¨ API å‘é€æ•°æ®
      // yourApiMethod(form.value)
    
      uni.showToast({
        title: 'å‘å¸ƒæˆåŠŸ',
        icon: 'success'
      })
    }
		
		
</script>

<style scoped>
	.example {
		padding: 15px;
		background-color: #fff;
	}

	.segmented-control {
		margin-bottom: 15px;
	}

	.button-group {
		margin-top: 15px;
		display: flex;
		justify-content: space-around;
	}

	.form-item {
		display: flex;
		align-items: center;
		flex: 1;
	}

	.submit-button {
	  background: linear-gradient(45deg, #2979ff, #00c6ff);
	  color: white;
	  text-align: center;
	  border-radius: 8px;
	  padding: 14px 0;
	  font-size: 16px;
	  font-weight: bold;
	  box-shadow: 0 4px 12px rgba(41, 121, 255, 0.3);
	  margin-top: 20px;
	}
</style>
